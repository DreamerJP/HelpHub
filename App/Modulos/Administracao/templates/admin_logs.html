{% extends "layout_base.html" %} {% block title %}Logs - HelpHub 4.0{% endblock
%} {% block page_title %}Logs do Sistema{% endblock %} {% block content %}
<div class="glass-panel" style="padding: 1.5rem; border-radius: 12px">
  <!-- Filtros de Log -->
  <div style="display: flex; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap">
    <a
      href="{{ url_for('admin.logs', cat='todos') }}"
      class="erp-pill-filter {{ 'active' if categoria_ativa == 'todos' else 'inactive' }}"
      style="{{ 'background: var(--primary);' if categoria_ativa == 'todos' }}"
    >
      Todos
    </a>
    <a
      href="{{ url_for('admin.logs', cat='seguranca') }}"
      class="erp-pill-filter {{ 'active' if categoria_ativa == 'seguranca' else 'inactive' }}"
      style="{{ 'background: #f59e0b;' if categoria_ativa == 'seguranca' }}"
    >
      <i class="ph ph-shield-check"></i> Segurança/Acesso
    </a>
    <a
      href="{{ url_for('admin.logs', cat='erro') }}"
      class="erp-pill-filter {{ 'active' if categoria_ativa == 'erro' else 'inactive' }}"
      style="{{ 'background: var(--danger);' if categoria_ativa == 'erro' }}"
    >
      <i class="ph ph-warning-octagon"></i> Erros Críticos
    </a>
    <a
      href="{{ url_for('admin.logs', cat='geral') }}"
      class="erp-pill-filter {{ 'active' if categoria_ativa == 'geral' else 'inactive' }}"
      style="{{ 'background: var(--primary);' if categoria_ativa == 'geral' }}"
    >
      <i class="ph ph-info"></i> Eventos Gerais
    </a>
  </div>

  <div class="erp-terminal">
    {% for log in logs %}
    <div class="erp-terminal-line">
      <div class="erp-terminal-meta">
        <span style="color: #64748b; font-size: 0.7rem; font-weight: 500"
          >{{ log.time }}</span
        >
        <span style="color: #475569; font-size: 0.7rem">[{{ log.ip }}]</span>

        {% if log.level == 'ERROR' or log.level == 'CRITICAL' %}
        <span
          style="
            color: var(--danger);
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
          "
          >{{ log.level }}</span
        >
        {% elif log.level == 'WARNING' %}
        <span
          style="
            color: var(--warning);
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
          "
          >{{ log.level }}</span
        >
        {% elif log.categoria == 'seguranca' %}
        <span style="color: #38bdf8; font-weight: 800; font-size: 0.7rem"
          >SECURITY</span
        >
        {% else %}
        <span
          style="
            color: var(--success);
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
          "
          >{{ log.level }}</span
        >
        {% endif %}

        <span style="color: #475569; font-size: 0.7rem"
          >@ {{ log.origin }}</span
        >
      </div>
      <div style="color: #f1f5f9; font-size: 0.85rem; word-break: break-all">
        {{ log.msg }}
      </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; color: #64748b">
      <i
        class="ph ph-tray"
        style="font-size: 3rem; display: block; margin-bottom: 1rem"
      ></i>
      Nenhum registro encontrado para esta categoria.
    </div>
    {% endfor %}
  </div>

  <div
    style="
      margin-top: 1.5rem;
      color: var(--text-muted);
      font-size: 0.75rem;
      display: flex;
      justify-content: space-between;
    "
  >
    <span>Exibindo os últimos 100 eventos do sistema.</span>
    <span>Arquivo: system.log</span>
  </div>
</div>
{% endblock %}
