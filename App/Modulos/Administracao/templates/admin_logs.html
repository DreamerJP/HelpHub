{% extends "layout_base.html" %} {% block title %}Logs - HelpHub 4.0{% endblock
%} {% block page_title %}Logs do Sistema{% endblock %} {% block content %}
<div class="glass-panel" style="padding: 1.5rem; border-radius: 12px">
  <!-- Filtros de Log -->
  <div style="display: flex; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap">
    <a
      href="{{ url_for('admin.logs', cat='todos') }}"
      class="btn"
      style="border-radius: 20px; padding: 0.4rem 1.25rem; font-size: 0.85rem; border: none; transition: all 0.2s;
       {{ 'background: var(--accent-main, #3b82f6); color: white;' if categoria_ativa == 'todos' else 'background: #64748b; color: #e2e8f0;' }}"
    >
      Todos
    </a>
    <a
      href="{{ url_for('admin.logs', cat='seguranca') }}"
      class="btn"
      style="border-radius: 20px; padding: 0.4rem 1.25rem; font-size: 0.85rem; border: none; transition: all 0.2s;
       {{ 'background: #f59e0b; color: white;' if categoria_ativa == 'seguranca' else 'background: #64748b; color: #e2e8f0;' }}"
    >
      <i class="ph ph-shield-check"></i> Segurança/Acesso
    </a>
    <a
      href="{{ url_for('admin.logs', cat='erro') }}"
      class="btn"
      style="border-radius: 20px; padding: 0.4rem 1.25rem; font-size: 0.85rem; border: none; transition: all 0.2s;
       {{ 'background: #ef4444; color: white;' if categoria_ativa == 'erro' else 'background: #64748b; color: #e2e8f0;' }}"
    >
      <i class="ph ph-warning-octagon"></i> Erros Críticos
    </a>
    <a
      href="{{ url_for('admin.logs', cat='geral') }}"
      class="btn"
      style="border-radius: 20px; padding: 0.4rem 1.25rem; font-size: 0.85rem; border: none; transition: all 0.2s;
       {{ 'background: var(--accent-main, #3b82f6); color: white;' if categoria_ativa == 'geral' else 'background: #64748b; color: #e2e8f0;' }}"
    >
      <i class="ph ph-info"></i> Eventos Gerais
    </a>
  </div>

  <div
    style="
      background: #0f172a;
      color: #e2e8f0;
      padding: 1.25rem;
      border-radius: 10px;
      font-family: &quot;Fira Code&quot;, monospace;
      font-size: 0.8rem;
      height: 600px;
      overflow-y: auto;
      border: 1px solid #1e293b;
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
    "
  >
    {% for log in logs %}
    <div
      style="
        margin-bottom: 2px;
        padding: 4px 8px;
        border-bottom: 1px solid #1e293b;
        line-height: 1.2;
        display: flex;
        flex-direction: column;
        gap: 2px;
      "
    >
      <div
        style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap"
      >
        <span style="color: #64748b; font-size: 0.7rem; font-weight: 500"
          >{{ log.time }}</span
        >
        <span style="color: #475569; font-size: 0.7rem">[{{ log.ip }}]</span>

        {% if log.level == 'ERROR' or log.level == 'CRITICAL' %}
        <span
          style="
            color: #ef4444;
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
          "
          >{{ log.level }}</span
        >
        {% elif log.level == 'WARNING' %}
        <span
          style="
            color: #f59e0b;
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
          "
          >{{ log.level }}</span
        >
        {% elif log.categoria == 'seguranca' %}
        <span style="color: #38bdf8; font-weight: 800; font-size: 0.7rem"
          >SECURITY</span
        >
        {% else %}
        <span
          style="
            color: #10b981;
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
          "
          >{{ log.level }}</span
        >
        {% endif %}

        <span style="color: #475569; font-size: 0.7rem"
          >@ {{ log.origin }}</span
        >
      </div>
      <div style="color: #f1f5f9; font-size: 0.85rem; word-break: break-all">
        {{ log.msg }}
      </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; color: #64748b">
      <i
        class="ph ph-tray"
        style="font-size: 3rem; display: block; margin-bottom: 1rem"
      ></i>
      Nenhum registro encontrado para esta categoria.
    </div>
    {% endfor %}
  </div>

  <div
    style="
      margin-top: 1.5rem;
      color: var(--text-muted);
      font-size: 0.75rem;
      display: flex;
      justify-content: space-between;
    "
  >
    <span>Exibindo os últimos 100 eventos do sistema.</span>
    <span>Arquivo: system.log</span>
  </div>
</div>
{% endblock %}
