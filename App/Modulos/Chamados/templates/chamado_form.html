{% extends "layout_base.html" %} {% block title %}Novo Chamado{% endblock %} {%
block page_title %}Abertura de Chamado{% endblock %} {% block content %}
<div style="max-width: 800px">
  <form
    method="POST"
    class="glass-panel"
    style="padding: 2rem; border-radius: 8px"
  >
    {{ form.hidden_tag() }}

    <div
      style="
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1.5rem;
      "
    >
      <div>
        <label style="display: block; font-weight: 500; margin-bottom: 0.5rem"
          >Cliente</label
        >
        {{ form.cliente_id(style="width: 100%; padding: 0.6rem; border: 1px
        solid #D1D5DB; border-radius: 6px;") }}
      </div>
      <div>
        <label style="display: block; font-weight: 500; margin-bottom: 0.5rem"
          >Departamento / Destino</label
        >
        {{ form.departamento_id(style="width: 100%; padding: 0.6rem; border: 1px
        solid #D1D5DB; border-radius: 6px;") }}
      </div>
    </div>

    <div style="margin-bottom: 1.5rem">
      <label style="display: block; font-weight: 500; margin-bottom: 0.5rem"
        >Assunto</label
      >
      {{ form.assunto(style="width: 100%; padding: 0.6rem; border: 1px solid
      #D1D5DB; border-radius: 6px;") }}
    </div>

    <div style="margin-bottom: 1.5rem">
      <label style="display: block; font-weight: 500; margin-bottom: 0.5rem"
        >Descrição Detalhada</label
      >
      {{ form.descricao(rows=5, style="width: 100%; padding: 0.6rem; border: 1px
      solid #D1D5DB; border-radius: 6px; font-family: inherit;") }}
    </div>

    <div style="margin-bottom: 2rem">
      <label style="display: block; font-weight: 500; margin-bottom: 0.5rem"
        >Prioridade Inicial</label
      >
      {{ form.prioridade(style="width: 200px; padding: 0.6rem; border: 1px solid
      #D1D5DB; border-radius: 6px;") }}
    </div>

    <div style="display: flex; gap: 1rem">
      <button type="submit" class="btn btn-primary">Abrir Ticket</button>
      <a
        href="{{ url_for('chamados.lista') }}"
        class="btn"
        style="background: #e5e7eb; color: #374151"
        >Cancelar</a
      >
    </div>
  </form>
</div>
{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Inicializa Pesquisa no Campo de Cliente
    new TomSelect("#cliente_id", {
      create: false,
      placeholder: "Pesquise por nome, CPF ou CNPJ...",
      allowEmptyOption: true,
    });

    // Inicializa Pesquisa no Campo de Departamento
    new TomSelect("#departamento_id", {
      create: false,
      placeholder: "Selecione o destino...",
      allowEmptyOption: true,
    });
  });
</script>
{% endblock %}
